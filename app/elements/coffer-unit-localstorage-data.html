<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-localstorage/iron-localstorage.html">

<dom-module id="coffer-unit-localstorage-data">

  <template>
    <iron-localstorage
        id="unitLocal"
        name="coffer-unit-localstorage-data"
        value="{{unit}}"
        on-iron-localstorage-load-empty="_initializeUnit"></iron-localstorage>
  </template>

  <script>

    Polymer({

      is: 'coffer-unit-localstorage-data',

      properties: {

        itemName: String,

        unitItem: {
          type: Object,
          notify: true,
          computed: '_computeUnitItem(itemName)'
        },

        unit: {
          type: Array,
          notify: true
        }

      },

      _computeUnitItem: function(itemName) {
        if(this.unit != null) {
          for(var i = 0 ; i < this.unit.length ; i++) {
            if(this.unit[i].name === itemName) {
              return this.unit[i];
            }
          }
        }
        
        return null;
      },

      addItem: function(detail) {
        this.setItem(detail);
      },

      setItem: function(detail) {
        this.push('unit', detail);
      },

      _initializeUnit: function() {
        this.clearUnit();
      },

      clearUnit: function() {
        this.unit = [];
      },

      reload: function() {
        this.$.unitLocal.reload();
      }

    });

  </script>

</dom-module>
