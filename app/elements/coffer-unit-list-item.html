<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">

<dom-module id="coffer-unit-list-item">

  <template>

    <style>

      :host {
        @apply(--layout-vertical);
        @apply(--layout-center-justified);
        text-align: center;
      }

      @media (max-width: 767px) {
        :host {
          margin: 0 12px;
        }
      }

      paper-card.rate { 
        @apply(--layout-horizontal); 
      }
      .rate-image {
        width: 120px;
        height: 90px;
        margin-right:10px;
      }
      .rate-content {
        @apply(--layout-flex);
        float: left;
      }
      paper-card{
        max-width:100%;
        background-color:transparent;
        padding:10px 0;
        border-radius:0px;
        border:none;
        box-shadow:none
      }
      .card-content{
        padding:0;
        text-align:left
      }
      .rate-header{
        @apply(--things-coffer-title)
      }
      .rate-desc{
        height:40px;
        overflow:hidden;
        color:var(--app-primary-text-color);
      }
      .rate-info{
        @apply(--things-coffer-desc)
      }
      .rate-info iron-icon{
        @apply(--things-coffer-info-icon);
      }

    </style>

    <paper-card class="rate">
      <iron-image class="rate-image" sizing="contain" src="[[_imageSrc(item.thumbnail_id)]]"></iron-image>
      <div class="rate-content">
        <div class="card-content">
          <div class="rate-header">[[item.name]]</div>
          <div class="rate-info">
            <iron-icon icon="icons:assignment"></iron-icon>[[item.coffer.name]]
            <iron-icon icon="icons:alarm-on"></iron-icon><span>[[item.updated_at]]</span>
          </div>
          <div class="rate-desc">[[item.content]]</div>
        </div>
      </div>
    </paper-card>

  </template>

  <script>

    Polymer({

      is: 'coffer-unit-list-item',

      properties: {

        baseUrl: String,

        item: Object

      },

      _imageSrc: function(thumbnail) {
        if(thumbnail != null) {
          var thumbnailIds = thumbnail.split(',');

          var setting = document.querySelector('#setting');
          return setting.get('globals.baseUrl') + "/download/" + thumbnailIds[0];
        }
      }

    });

  </script>

</dom-module>
